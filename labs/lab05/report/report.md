---
## Front matter
title: "Отчёт по лабораторной работе №5"
subtitle: "Анализ файловой системы Linux. Команды для работы с файлами и каталогами"
author: "Воропаева Алёна Дмитриевна"

## Generic otions
lang: ru-RU
toc-title: "Содержание"

## Bibliography
bibliography: bib/cite.bib
csl: pandoc/csl/gost-r-7-0-5-2008-numeric.csl

## Pdf output format
toc: true # Table of contents
toc-depth: 2
lof: true # List of figures
lot: true # List of tables
fontsize: 12pt
linestretch: 1.5
papersize: a4
documentclass: scrreprt
## I18n polyglossia
polyglossia-lang:
  name: russian
  options:
	- spelling=modern
	- babelshorthands=true
polyglossia-otherlangs:
  name: english
## I18n babel
babel-lang: russian
babel-otherlangs: english
## Fonts
mainfont: PT Serif
romanfont: PT Serif
sansfont: PT Sans
monofont: PT Mono
mainfontoptions: Ligatures=TeX
romanfontoptions: Ligatures=TeX
sansfontoptions: Ligatures=TeX,Scale=MatchLowercase
monofontoptions: Scale=MatchLowercase,Scale=0.9
## Biblatex
biblatex: true
biblio-style: "gost-numeric"
biblatexoptions:
  - parentracker=true
  - backend=biber
  - hyperref=auto
  - language=auto
  - autolang=other*
  - citestyle=gost-numeric
## Pandoc-crossref LaTeX customization
figureTitle: "Рис."
tableTitle: "Таблица"
listingTitle: "Листинг"
lofTitle: "Список иллюстраций"
lotTitle: "Список таблиц"
lolTitle: "Листинги"
## Misc options
indent: true
header-includes:
  - \usepackage{indentfirst}
  - \usepackage{float} # keep figures where there are in the text
  - \floatplacement{figure}{H} # keep figures where there are in the text
---

# Цель работы
Ознакомление с файловой системой Linux, её структурой, именами и содержанием
каталогов. Приобретение практических навыков по применению команд для работы
с файлами и каталогами,по управлению процессами (и работами),по проверке использования диска и обслуживанию файловой системы.

# Задание

1. Выполните все примеры, приведённые в первой части описания лабораторной работы.

2. Выполните следующие действия, зафиксировав в отчёте по лабораторной работе
используемые при этом команды и результаты их выполнения:

2.1. Скопируйте файл /usr/include/sys/io.h в домашний каталог и назовите его
equipment. Если файла io.h нет,то используйте любой другой файл в каталоге
/usr/include/sys/ вместо него.

2.2. В домашнем каталоге создайте директорию ~/ski.plases.

2.3. Переместите файл equipment в каталог ~/ski.plases.

2.4. Переименуйте файл ~/ski.plases/equipment в ~/ski.plases/equiplist.

2.5. Создайте в домашнем каталоге файл abc1 и скопируйте его в каталог
~/ski.plases,назовите его equiplist2.

2.6. Создайте каталог с именем equipment в каталоге ~/ski.plases.

2.7. Переместите файлы ~/ski.plases/equiplist и equiplist2 в каталог
~/ski.plases/equipment.

2.8. Создайте и переместите каталог ~/newdir в каталог ~/ski.plases и назовите
его plans.

3. Определите опции команды chmod,необходимые для того,чтобы присвоить перечис-
ленным ниже файлам выделенные права доступа, считая, что в начале таких прав
нет:

3.1. drwxr--r-- ... australia

3.2. drwx--x--x ... play

3.3. -r-xr--r-- ... my_os

3.4. -rw-rw-r-- ... feathers

При необходимости создайте нужные файлы.

4. Проделайте приведённые ниже упражнения, записывая в отчёт по лабораторной
работе используемые при этом команды:

4.1. Просмотрите содержимое файла /etc/password.

4.2. Скопируйте файл ~/feathers в файл ~/file.old.

4.3. Переместите файл ~/file.old в каталог ~/play.

4.4. Скопируйте каталог ~/play в каталог ~/fun.

4.5. Переместите каталог ~/fun в каталог ~/play и назовите его games.

4.6. Лишите владельца файла ~/feathers права на чтение.

4.7. Что произойдёт,если вы попытаетесь просмотреть файл ~/feathers командой
cat?

4.8. Что произойдёт,если вы попытаетесь скопировать файл ~/feathers?

4.9. Дайте владельцу файла ~/feathers право на чтение.

4.10. Лишите владельца каталога ~/play права на выполнение.

4.11. Перейдите в каталог ~/play.Что произошло?

4.12. Дайте владельцу каталога ~/play право на выполнение.

5. Прочитайте man по командам mount,fsck,mkfs,kill и кратко их охарактеризуйте,
приведя примеры.

# Теоретическое введение

Анализ файловой системы

Файловая система в Linux состоитиз фалов и каталогов.Каждому физическому носи-
телю соответствует своя файловая система.
Существует несколькотипов файловых систем.Перечислим наиболее часто встречаю-
щиесятипы:

– ext2fs (second extended filesystem);

– ext2fs (third extended file system);

– ext4 (fourth extended file system);

– ReiserFS;

– xfs;

– fat (file allocation table);

– ntfs (new technology file system).

Для просмотра используемых в операционной системе файловых систем можно вос-
пользоваться командой mount без параметров.

В контексте команды mount устройство—специальный файл устройства,с помощью
которого операционная система получает доступ к аппаратному устройству. Файлы
устройств обычно располагаются в каталоге /dev,имеют сокращённые имена (например,
sdaN,sdbN или hdaN,hdbN,где N—порядковый номер устройства,sd—устройства SCSI,
hd—устройства MFM/IDE).

Точка монтирования—каталог(путь к каталогу),к которому присоединяются файлы
устройств.

Для определения объёма свободного пространства на файловой системе можно вос-
пользоваться командой df, которая выведет на экран список всех файловых систем
в соответствии с именами устройств,с указанием размера и точки монтирования

# Выполнение лабораторной работы

Для начала мы выполнили все примеры, приведённые в первой части описания лабораторной работы.(рис. [-@fig:001])

![Выполнение примеров](изо/Снимок13-36-27.png){ #fig:001 width=70% }

2.1 *Скопируйте файл /usr/include/sys/io.h в домашний каталог и назовите его equipment*

	для этого используем команду cp
	
2.2. *В домашнем каталоге создайте директорию ~/ski.plases.*

	для этого используем команду mkdir
	
2.3. *Переместите файл equipment в каталог ~/ski.plases.*

	для этого используем команду mv equipment ~/ski.plases/equipment
	
2.4. *Переименуйте файл ~/ski.plases/equipment в ~/ski.plases/equiplist.*

	для этого используем команду mv ~/ski.plases/equipment ~/ski.plases/equiplist

2.5. *Создайте в домашнем каталоге файл abc1 и скопируйте его в каталог*
~/ski.plases,назовите его equiplist2.

	для создания используем mkdir abc1

	для копирования cp abc1 ~/ski.plases/equiplist2
	
2.6. *Создайте каталог с именем equipment в каталоге ~/ski.plases.*

	для этого используем команду mkdir ~/ski.plases/equipment
	
2.7. *Переместите файлы ~/ski.plases/equiplist и equiplist2 в каталог ~/ski.plases/equipment.*

	для этого используем команду mv ~/ski.plases/equiplist equiplist2 /ski.plases/equipment/equiplist equiplist2

2.8. *Создайте и переместите каталог ~/newdir в каталог ~/ski.plases и назовите eго plans.*

	для этого используем команды: mkdir ~/newdir 

	mv ~/newdir ~/ski.plases/plans 
	
Выполнение вышеописанных действий в консоли(рис. [-@fig:002])

![Создание, перемещение и переименовывание каталогов и файлов](изо/Снимок2.png){ #fig:002 width=70% }


3.1. *drwxr--r-- ... australia*

- u+r+w+x
- g+r-W-x
- o+r-w-x

3.2. *drwx--x--x ... play*

- u+r+w+x
- g-r-w+x
- o-r-w+x

3.3. *-r-xr--r-- ... my_os*

- u+r-w+x
- g+r-W-x
- o+r-w-x

3.4. *-rw-rw-r-- ... feathers*

- u+r+w-x
- g+r+w-x
- o+r-w-x

Выполнение вышеописанных действий в консоли(рис. [-@fig:003])

![Предоставление прав доступа](изо/Снимок3.png){ #fig:003 width=70% }

4.1. *Просмотрите содержимое файла /etc/password.*

ls /etc/password

4.2. *Скопируйте файл ~/feathers в файл ~/file.old.*

cp ~/feathers ~/file.old

4.3. *Переместите файл ~/file.old в каталог ~/play.*

mv ~/file.old ~/play/file/old

4.4. *Скопируйте каталог ~/play в каталог ~/fun.*

cp play fun

4.5. *Переместите каталог ~/fun в каталог ~/play и назовите его games.*

mv fun play/games

4.6. *Лишите владельца файла ~/feathers права на чтение.*

chmod u-r feathers

4.7. *Что произойдёт,если вы попытаетесь просмотреть файл ~/feathers командой cat?*

Отказано в доступе

4.8. *Что произойдёт,если вы попытаетесь скопировать файл ~/feathers?*

невозможно открыть 'feathers' для чтения: отказано в доступе

4.9. *Дайте владельцу файла ~/feathers право на чтение.*

chmod u+r feathers

4.10. *Лишите владельца каталога ~/play права на выполнение.*

chmod u-x play

4.11. *Перейдите в каталог ~/play.Что произошло?*

Отказано в доступе

4.12. *Дайте владельцу каталога ~/play право на выполнение.*

chmod u+x play

Выполнение вышеописанных действий в консоли(рис. [-@fig:004])

![Работа с файлами и каталогами](изо/Снимок4.png){ #fig:004 width=70% }

Чтение man по командам mount,fsck,mkfs,kill(рис. [-@fig:005])

![Применение команды man](изо/Снимок5.png){ #fig:005 width=70% }

Команда *mount*

применяется для монтирования файловых систем

пример с опцией -а примонтирует все устройства описанные в fstab


Команда *fsck*

Предназначена для проверки и исправления ошибок файловой системы

Пример опция -А запустит во всех файловых системах


Команда *mkfs*

Используется для форматирования диска и создания файловых систем

Пример mkfs без опций создает файловую систему


Команда *kill*

Используется для прерывания процессов

Пример kill с опцией -l показывает сигналы(рис. [-@fig:008])

![Применение команды fsck -А](изо/Снимок9.png){ #fig:008 width=70% }

# Контрольные вопросы

1. Дайте характеристику каждой файловой системе,существующей на жёстком диске компьютера, на котором вы выполняли лабораторную работу.

ext4 ­— файловая система, основанная на ext3 и совместимая с ней (только обратно). Отличается от ext3 поддержкой extent'ов, групп смежных физических блоков, управляемых как единое целое; повышенной скоростью проверки целостности и рядом других усовершенствований.

BTRFS (B-Tree Filesystem) — файловая система для Unix-подобных операционных систем, основанная на технике «Copy on Write» (CoW), призванная обеспечить легкость масштабирования файловой системы, высокую степень надежности и сохранности данных, гибкость настроек и легкость администрирования, сохраняя при этом высокую скорость работы.
2. Приведите общую структуру файловой системы и дайте характеристику каждой директории первого уровня этой структуры.

/ — root каталог. Содержит в себе всю иерархию системы;

/bin — здесь находятся двоичные исполняемые файлы. Основные общие команды, хранящиеся отдельно от других программ в системе (прим.: pwd, ls, cat, ps);

/boot — тут расположены файлы, используемые для загрузки системы (образ initrd, ядро vmlinuz);

/dev — в данной директории располагаются файлы устройств (драйверов). С помощью этих файлов можно взаимодействовать с устройствами. К примеру, если это жесткий диск, можно подключить его к файловой системе. В файл принтера же можно написать напрямую и отправить задание на печать;

/etc — в этой директории находятся файлы конфигураций программ. Эти файлы позволяют настраивать системы, сервисы, скрипты системных демонов;

/home — каталог, аналогичный каталогу Users в Windows. Содержит домашние каталоги учетных записей пользователей (кроме root). При создании нового пользователя здесь создается одноименный каталог с аналогичным именем и хранит личные файлы этого пользователя;

/lib — содержит системные библиотеки, с которыми работают программы и модули ядра;

/lost+found — содержит файлы, восстановленные после сбоя работы системы. Система проведет проверку после сбоя и найденные файлы можно будет посмотреть в данном каталоге;

/media — точка монтирования внешних носителей. Например, когда вы вставляете диск в дисковод, он будет автоматически смонтирован в директорию /media/cdrom;

/mnt — точка временного монтирования. Файловые системы подключаемых устройств обычно монтируются в этот каталог для временного использования;

/opt — тут расположены дополнительные (необязательные) приложения. Такие программы обычно не подчиняются принятой иерархии и хранят свои файлы в одном подкаталоге (бинарные, библиотеки, конфигурации);

/proc — содержит файлы, хранящие информацию о запущенных процессах и о состоянии ядра ОС;

/root — директория, которая содержит файлы и личные настройки суперпользователя;

/run — содержит файлы состояния приложений. Например, PID-файлы или UNIX-сокеты;

/sbin — аналогично /bin содержит бинарные файлы. Утилиты нужны для настройки и администрирования системы суперпользователем;

/srv — содержит файлы сервисов, предоставляемых сервером (прим. FTP или Apache HTTP);

/sys — содержит данные непосредственно о системе. Тут можно узнать информацию о ядре, драйверах и устройствах;

/tmp — содержит временные файлы. Данные файлы доступны всем пользователям на чтение и запись. Стоит отметить, что данный каталог очищается при перезагрузке;

/usr — содержит пользовательские приложения и утилиты второго уровня, используемые пользователями, а не системой. Содержимое доступно только для чтения (кроме root). Каталог имеет вторичную иерархию и похож на корневой;

/var — содержит переменные файлы. Имеет подкаталоги, отвечающие за отдельные переменные. Например, логи будут храниться в /var/log, кэш в /var/cache, очереди заданий в /var/spool/ и так далее.

3. Какая операция должна быть выполнена, чтобы содержимое некоторой файловой
системы было доступно операционной системе?

Монтирование тома

4. Назовите основные причины нарушения целостности файловой системы.Как устранить повреждения файловой системы?

1. Один блок адресуется несколькими mode (принадлежит нескольким файлам).

2. Блок помечен как свободный, но в то же время занят (на него ссылается onode).

3. Блок помечен как занятый, но в то же время свободен (ни один inode на него не ссылается).

4. Неправильное число ссылок в inode (недостаток или избыток ссылающихся записей в каталогах).

5. Несовпадение между размером файла и суммарным размером адресуемых inode блоков.

6. Недопустимые адресуемые блоки (например, расположенные за пределами файловой системы).

7. "Потерянные" файлы (правильные inode, на которые не ссылаются записи каталогов).

5. Как создаётся файловая система?

С помощью команды mkfs

6. Дайте характеристику командам для просмотра текстовых файлов.

Cat может читать и объединять файлы, записывая их содержимое в стандартный вывод. Если файл не указан или имя входного файла указано как один дефис ( - ), он считывает из стандартного ввода.

Cat чаще всего используется для отображения содержимого одного или нескольких текстовых файлов, объединения файлов путем добавления содержимого одного файла в конец другого файла и создания новых файлов.

Команда tac - это тоже самое, что и cat, только отображает строки в обратном порядке.

Команда head печатает первые строки (по умолчанию 10 строк) одного или нескольких файлов или переданных данных в стандартный вывод.

Команда tail отображает последнюю часть (по умолчанию 10 строк) одного или нескольких файлов или переданных данных. Он также может быть 
использован для мониторинга изменений файла в режиме реального времени. 

7. Приведите основные возможности команды cp в Linux.

Копирует, перемещает директории,файлы

8. Приведите основные возможности команды mv в Linux.

Предназначена для перемещения и переименования файлов и каталогов.

9. Что такое права доступа? Как они могут быть изменены

Права доступа к файлам, атрибуты и владение управляют уровнем доступа, который система обрабатывает, а пользователи имеют к файлам. 

Права доступа к файлу или каталогу можно изменить,воспользовавшись командой
chmod.


# Выводы

В результате работы мы познакомились с файловой системой Linux, её структурой, именами и содержанием
каталогов. Приобрели практические навыки по применению команд для работы
с файлами и каталогами, по управлению процессами (и работами),по проверке использования диска и обслуживанию файловой системы.

